# hyperledger与其他区块链的不同

允许私有和许可，通过Membership service provider(MSP)来登记成员

# Fabric核心模块及作用

## 子模块[1]

### cryptogen

用于网点的证书

### confixgen

用于生成orderer的初始化文件和channel的初始化文件

### configtxlator

把区块链的二进制文件转化成JSON格式的文件

### orderer

对交易进行排序，将排序好的交易打包成区块

### peer

主节点模块，负责存储区块链数据、运行维护链码、提供对外付服务接口

## 使用子模块的方法

```
export PATH=${PWD}/../bin:$PATH
```



## 作用[1]

### peer模块

四种角色（Leader和Anchor只能存在一个，Commit和Endorse可以存在多个）

#### Commiter Peer 提交节点

维护区块链账本结构

#### Endorse Peer 背书节点

对交易进行校验

#### Leader Peer 

代表组织从Orderer节点获取区块信息

两种制定方式：自助选举（gossip协议），强制制定

#### Anchor Peer 锚节点

代表组织和其他组织进行信息交换

在configtx.yaml中配置

### Orderer模块

负责对不同客户发送的交易进行排序和打包

两种打包模式：Solo、Kafka

# 技术架构[2]

## 四大模块

成员服务、区块链服务、智能合约、应用编程接口

### MSP（成员服务）

提供证书发布、验证及相关加密机制和协议

Fabric CA提供了客户端和SDK两种方式进行交互

#### 三级证书结构

根证书-业务证书-用户证书

### 区块链服务

P2P协议+分布式账本+共识机制管理

#### P2P协议

Peer和Orderer采用gRPC提供远程服务

节点之间采用Gossip进行状态同步和分发

##### Gossip协议

数据发送方从网络中随机选取若干节点，将数据发送过去，接收方重复这一过程（往往只选择发送方之外节点进行传播）。这一过程持续下去，网络中所有节点最终（时间复杂度为节点总个数的对数）都会达到一致。数据传输的方向可以是发送方发送或获取方拉取。

#### 共识机制

SOLO、Kafka、Raft

#### 分布式账本

世界状态+事务日志

##### 世界状态

最新的分布式账本状态

##### 事务日志

世界状态的更新历史

### 智能合约服务

Fabric中称为链码chaincode

### 应用编程接口

SDK（开发工具包）+CLI（命令行）

# 核心组件

## 4种服务类型节点

背书节点、提交节点、排序节点、证书节点

### 背书节点（Endorser）

对交易的提案进行验证并模拟交易执行

### 提交节点（Committer）

负责在接受交易结果前再次检查合法性，接受合法交易对账本的修改，并写入区块链结构

### 排序节点（orderer）

 对所有发往网络中的交易进行排序，将排序后的交易按照配置中的约定整理为区块，之后提交给确认节点进行处理

### 证书节点（CA）

负责对网络中所有的证书进行管理，提供标准的PKI服务

# 账本

世界状态+历史数据库

世界状态使用CouchDB，历史数据库使用LevelDB

每个通道拥有独立账本

# 参考文献

[1] 《区块链开发实战：Hyperledger Fabric关键技术与案例分析》

[2] 《企业级区块链实战教程》